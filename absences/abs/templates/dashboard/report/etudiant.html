{% extends "dashboard/report/base.html" %}

{% block report_content %}

<div class = "tab" id = "tab_absences" tab_name = "Absences">

    <div class="report">
        
        Absences :
    <table>
        <thead>
            <th>Date et heure</th>
            <th>Matière</th>
            <th>Enseignant</th>
            <th>Justifiée ?</th>
        </thead>
        <tbody>
            {% for a in absences %}
            <tr>
                <td>{{a.cours.dateDebut.date}}<br/>
                {{a.cours.dateDebut.hour}}:{{a.cours.dateDebut.minute}} à {{a.cours.dateFin.hour}}:{{a.cours.dateFin.minute}}</td>
                <td>{{a.cours.matiere}}</td>
                <td>{{a.cours.enseignant.get_fullname}}</td>
                <td>Non</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
   <p> Justificatifs en attente</p>
    <table>
        <thead>
            <th>Période</th>
            <th>Fichier</th>
        </thead>
        <tbody>
            {% for j in justif_attente %}
            <tr>
                <td>Du {{j.dateDebut.date}} à {{j.dateDebut.hour}}:{{j.dateDebut.minute}}
                au {{j.dateFin.date}} à {{j.dateFin.hour}}:{{j.dateFin.minute}}</td>
                <td><a href="/static/media/{{j.fichier}}">Visionner</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    </div>



</div>
<div class = "tab" id = "tab_add_justificatif" tab_name = "Proposer un justificatif">
<form method="post" action="/abs/add/justificatif" enctype="multipart/form-data">
        {% csrf_token %}
        <table>
            {{ justificatif_formset }}
        </table>
       <button class="clean-gray" type="submit">Enregistrer</button>
    </form>

</div>
{% endblock %}
